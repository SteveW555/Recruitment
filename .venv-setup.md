# Python Virtual Environment Setup

## Overview

A complete Python virtual environment (`.venv`) has been created at the project root with all required dependencies for the AI Router and utilities.

## Environment Details

- **Location**: `./.venv/` (project root)
- **Python Version**: 3.12
- **Created**: 2025-11-03

## Setup Instructions

### Initial Setup

```bash
# Create fresh virtual environment
python3 -m venv .venv

# Activate virtual environment (macOS/Linux)
source .venv/bin/activate

# Upgrade pip
pip install --upgrade pip

# Install all dependencies
pip install -r requirements.txt
```

### Daily Development

```bash
# The dev server automatically uses .venv
npm start

# Or manually activate for Python development
source .venv/bin/activate
```

## Dependencies Installed

### Core AI & LLM Services
- **groq** (0.33.0) - Groq API client for fast LLM inference
- **anthropic** (0.72.0) - Anthropic Claude API client
- **sentence-transformers** (5.1.2) - Semantic text embeddings
- **spacy** (3.8.7) - NLP processing library

### Web Framework
- **fastapi** (0.121.0) - Modern async web framework
- **uvicorn** (0.38.0) - ASGI server
- **pydantic** (2.12.3) - Data validation
- **pydantic-settings** (2.11.0) - Settings management

### Database & Storage
- **supabase** (2.23.0) - PostgreSQL + Auth + Storage client
- **redis** (7.0.1) - Redis client
- **psycopg2-binary** (2.9.11) - PostgreSQL adapter

### Data Processing & ML
- **pandas** (2.3.3) - Data manipulation
- **numpy** (2.3.4) - Numerical computing
- **scikit-learn** (1.7.2) - Machine learning
- **scipy** (1.16.3) - Scientific computing
- **torch** (2.9.0) - Deep learning framework

### Visualization
- **plotly** (6.3.1) - Interactive charts and dashboards

### Text & Document Processing
- **beautifulsoup4** (4.14.2) - HTML/XML parsing
- **lxml** (6.0.2) - XML processing

### Logging & Configuration
- **structlog** (25.5.0) - Structured logging
- **python-dotenv** (1.2.1) - Environment variable loading

### Supporting Libraries
- **transformers** (4.57.1) - HuggingFace models
- **huggingface-hub** (0.36.0) - HuggingFace integration
- **requests** (2.32.5) - HTTP library
- **httpx** (0.28.1) - Async HTTP client

## Key Configuration

### Python Router Manager Integration

File: `backend-api/pythonRouterManager.js`

The backend automatically spawns the Python AI Router process using:
```javascript
const pythonPath = join(projectRoot, '.venv', 'bin', 'python');
```

This ensures the correct virtual environment is used without manual activation.

### Requirements File

File: `requirements.txt`

All dependencies are documented in `requirements.txt` for:
- Reproducibility across environments
- Easy installation on new machines
- Version pinning for stability

## Verification

### Check Virtual Environment

```bash
# Verify .venv is active
which python
# Should show: /path/to/Recruitment/.venv/bin/python

# Check installed packages
pip list
```

### Test Server Startup

```bash
npm start
# Both frontend and backend should start successfully
# Frontend: http://localhost:3000/
# Backend: http://localhost:3002/
# AI Router: http://localhost:8888/
```

## Gitignore

The `.venv/` directory is added to `.gitignore`:
```
.venv/
```

This prevents the large virtual environment (~1GB+) from being committed to version control.

## Troubleshooting

### Virtual Environment Not Found

If you get "No module found" errors:
```bash
# Ensure .venv exists and is properly created
ls -la .venv/bin/python

# Recreate if necessary
rm -rf .venv
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
```

### ModuleNotFoundError at Runtime

If a Python module is missing at runtime:
```bash
# Activate venv and install the missing package
source .venv/bin/activate
pip install <package-name>

# Or reinstall all from requirements.txt
pip install -r requirements.txt
```

### macOS Permission Issues

If you encounter permission errors:
```bash
# Ensure proper permissions
chmod -R u+w .venv
```

## Environment Variables

The system uses environment variables from `.env` file:
- `GROQ_API_KEY` - Groq API key for fast LLM inference
- `ANTHROPIC_API_KEY` - Anthropic API key for Claude models
- `SUPABASE_URL` - Supabase project URL
- `SUPABASE_KEY` - Supabase public anon key

Create a `.env` file in the project root with these values.

## Additional Notes

- The virtual environment takes ~1GB of disk space
- PyTorch installation may take several minutes on first setup
- The sentence-transformers library will download models on first use
- All dependencies are pinned to specific versions for reproducibility

## References

- [Python venv Documentation](https://docs.python.org/3/library/venv.html)
- [requirements.txt Format](https://pip.pypa.io/en/latest/reference/requirements-file-format/)
