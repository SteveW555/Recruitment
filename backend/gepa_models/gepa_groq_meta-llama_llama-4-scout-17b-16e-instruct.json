{
  "prog.predict": {
    "traces": [],
    "train": [],
    "demos": [],
    "signature": {
      "instructions": "### Task Description\nYou will be provided with a raw string representing a messy CSV file (`messy_csv`). Your objective is to parse this string to identify the **primary summary table** of staff members and their total worked hours, extract this data, and return a list of `StaffMember` objects.\n\n### 1. Identify the Primary Data Source\nThe CSV may contain multiple sections, metadata, or secondary tables. You must locate the single \"main\" table summarizing staff totals.\n*   **Target Headers:** Look for a row containing a combination of a Name column (e.g., `Staff Member`, `EmpName`, `Who`, `Person`, `Name`, `Employee`) and a Time column (e.g., `Hours`, `Duration`, `Qty`, `Total hours`, `Billable`, `Worked`, `Total Time`).\n*   **Data Structure:** The primary data usually appears as a contiguous list of names and numbers.\n*   **Key Constraints (What to Ignore):**\n    *   **Ignore Detail Logs:** Do *not* extract data from sections labeled \"Activity Log\", \"Detailed Activity Log\", \"Task ID\", \"ProjectName\", or specific shift details.\n    *   **Ignore Metadata headers:** Ignore file headers like \"Confidential Report\", \"Generated by...\", or date lines unless they are part of the specific row being processed.\n    *   **Ignore Footers:** Stop processing if you encounter footer markers like \"---metadata break---\", \"Reported By\", or \"END FOOTER\" *unless* a valid summary table appears clearly after them (e.g., a \"Reported By\" section might actually contain the valid staff list if the top section was just a header). *Crucial: If multiple tables exist, assess which one looks like the summary roster versus a specific task list.*\n\n### 2. Extraction & Cleaning Rules\nFor every valid row in the primary table:\n*   **Name:** Extract the string from the identified Name column. Remove prefixes/suffixes if present (e.g., \"c.\", \"~\").\n*   **Hours:** Extract the numerical value from the identified Time column.\n    *   Remove non-numeric characters (e.g., \"hr\", \"approx\").\n    *   Convert to a float.\n\n### 3. Filtering Logic (Strict)\n*   **INCLUDE Zero Values:** If a staff member is listed in the main summary table with `0.0` or `0` hours, **keep them**. This indicates they are on the roster but didn't work.\n*   **INCLUDE High Values:** Keep all standard working hours (e.g., 3.0, 40.5, 12.0).\n*   **EXCLUDE Fractional Fragments (Contextual):**\n    *   If a value is extremely small (e.g., < 1.0) *and* appears in a context suggesting it is a specific task fragment rather than a total (often found in detailed logs), exclude it.\n    *   *However*, if the value is in the clear main summary list (e.g., a row says \"Henry Ford, 1.06\"), **keep it**. The location in the primary table overrides the value size.\n*   **Handling Multiple Lists:** If the CSV contains disjointed lists of names and hours (e.g., a list at the top, a metadata break, and then another list of names), **combine them** if they both appear to be valid staff summaries. Do not stop at the first blank line if valid data follows shortly after in a similar format.\n\n### 4. Output Format\nReturn a list of `StaffMember` objects.\n*   Format: `[StaffMember(name='Name Here', hours=12.3), ...]`",
      "fields": [
        {
          "prefix": "Messy Csv:",
          "description": "The raw, messy CSV content containing various tables."
        },
        {
          "prefix": "Reasoning: Let's think step by step in order to",
          "description": "${reasoning}"
        },
        {
          "prefix": "Staff List:",
          "description": "List of staff members and their total hours."
        }
      ]
    },
    "lm": null
  },
  "metadata": {
    "dependency_versions": {
      "python": "3.13",
      "dspy": "3.0.4",
      "cloudpickle": "3.1"
    }
  }
}
